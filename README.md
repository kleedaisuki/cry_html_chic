# 🚇 SG-TRANSIT-VIS  

## 一个确定性的城市公共交通时空可视化系统

> **没有后端 API · 没有运行时 fetch · 没有隐藏状态**  
> 只有：**数据 → 语义 → 视觉**

<p align="center">
  离线 Ingest · 确定性数据 · 纯前端渲染
</p>

---

## ⚠️ 这不是又一个“地图可视化项目”

我们已经见过太多这样的系统：

- ❌ 前端强依赖实时 API  
- ❌ 渲染结果随服务器状态漂移  
- ❌ 图很炫，但语义不清  
- ❌ Debug 横跨前端 / 后端 / 网络 / 缓存地狱  

**SG-TRANSIT-VIS 选择了一条完全相反的路。**

> 我们不追求“实时”。  
> 我们追求**可复现、可解释、可推理**。

---

## 🧠 核心思想

> **如果一个可视化在运行时还需要 fetch 数据，  
> 那它从设计上就不具备可复现性。**

于是我们问了一个看起来“反直觉”的问题：

### 👉 前端能不能永远不请求数据？

答案是：**不仅能，而且应该。**

---

## 🔁 我们如何做？

```md

现实世界的数据
↓
离线 Ingest（Python）
↓
语义稳定的 JS 常量
↓
纯前端可视化（Leaflet + D3）

```

- ❌ 没有 REST API  
- ❌ 没有 GraphQL  
- ❌ 没有“加载中 / 重试中”  

这是**设计选择**，不是权宜之计。

---

## ✨ 系统能做什么？

- 🗺 **公共交通线路的空间可视化（MRT / LRT / Bus）**
- 📈 **客流随时间变化的时序呈现**
- 🎚 **全局时间轴 + 播放控制**
- 🚦 **基于承载能力的颜色语义**
- 🌍 **人口热力图与交通网络叠加**
- 🧊 **完全确定性的渲染结果**

是的：

> **你可以直接双击 `index.html` 运行。**  
> 不需要服务器，不会触发 CORS。

---

## 🔥 为什么这很重要？

### 主流做法是这样的

```text
前端 ──fetch──▶ 后端 ──query──▶ 数据
````

结果通常是：

- 可视化结果不可复现
- Bug 来源不清晰
- 状态分散在多个系统

### 我们的做法是这样的

```text
现实 → 数据工件 → 可视化函数
```

- 可视化 = 数据的**纯函数**
- 数据是**版本化的工件**
- Bug 可以被**精确定位**
- 结果可以被**重放与对比**

这更像**科学计算**，而不是 Web CRUD。

---

## 🧩 架构一览

```txt
┌───────────────────┐
│ 数据源            │
│ LTA · OSM · Gov   │
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│ ingest（Python）  │
│ raw → IR → JS     │
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│ 前端（纯）        │
│ Leaflet · D3      │
└───────────────────┘
```

边界是**文件级别的**，不是口头约定。

---

## 🎨 颜色不是装饰，是语义

| 交通类型 | 承载能力 | 颜色体系 |
| ---- | ---- | ---- |
| MRT  | 高    | 蓝色系  |
| LRT  | 中    | 绿色系  |
| Bus  | 低    | 橙色系  |

颜色表达的是 **利用率（utilization）**，不是“看起来多热闹”。

> 一条变红的线路，不是“人多”，
> 而是**正在逼近结构极限**。

---

## ▶ 如何运行

```text
1. 使用 ingest 生成数据
2. 打开 frontend/index.html
3. 拖动幕布
4. 看城市呼吸
```

没有隐藏步骤。

---

## 🧠 这个项目适合谁？

- 研究 **城市系统 / 时空数据** 的人
- 在意 **确定性与可复现性** 的工程师
- 厌倦“好看但没解释”的可视化
- 相信 **数据需要被认真对待** 的人

---

## 📜 项目立场（非常重要）

> 数据应该是稳定的。
> 语义应该是显式的。
> 可视化应该是诚实的。

这个项目不单是为了 Demo。
它是为了**思考与推理**。

---

## ⭐ 如果你认同这种做法

Star 它。
Fork 它。
或者反对它。

Trending 只是副产品。
**清晰才是目的。**
