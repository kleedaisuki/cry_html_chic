{
    "version": 1,
    "profile": "default",
    "log_level": "DEBUG",
    "paths": {
        "configs_root": "configs/ingest",
        "data_root": "data",
        "raw_root": "data/raw",
        "preprocessed_root": "data/preprocessed"
    },
    "execution": {
        "parallelism": 4,
        "strategy": "threads",
        "fail_fast": true
    },
    "cache_configs": {
        "raw": {
            "name": "fs_raw",
            "config": {
                "base_dir": "data/raw"
            }
        },
        "preprocessed": {
            "name": "fs_preprocessed",
            "config": {
                "base_dir": "data/preprocessed"
            }
        }
    },
    "transform_configs": {
        "ir_version": 1,
        "target": {
            "js_abi_version": 1,
            "module_format": "esm",
            "layout": "single",
            "path_prefix": "constants/",
            "options": {}
        }
    },
    "plugins": [
        "ingest.sources.datamall",
        "ingest.cache.raw",
        "ingest.cache.preprocess",
        "ingest.transform.front.json_payload",
        "ingest.transform.optimizer.plain_optimizer",
        "ingest.transform.optimizer.data_cleaning_optimizer",
        "ingest.transform.output.js_constants"
    ],
    "jobs": [
        {
            "name": "datamall_bus_stops",
            "source": {
                "name": "datamall",
                "config": {
                    "dataset": "BusStops",
                    "account_key": "your_api_key"
                }
            },
            "transform": {
                "frontend": {
                    "name": "json_payload",
                    "config": {}
                },
                "optimizer": {
                    "name": "plain",
                    "config": {}
                },
                "backend": {
                    "name": "js_constants",
                    "config": {}
                }
            }
        },
        {
            "name": "datamall_passenger_flow",
            "source": {
                "name": "datamall",
                "config": {
                    "dataset": "PassengerVolumeByOriginDestinationTrain",
                    "account_key": "你的LTA_API_KEY"
                }
            },
            "transform": {
                "frontend": {
                    "name": "json_payload",
                    "config": {
                        "extract_key": "value"
                    }
                },
                "optimizer": {
                    "name": "data_cleaning",
                    "config": {
                        "drop_missing_rows": true,
                        "aggregate_by_hour": true,
                        "time_field": "timestamp",
                        "value_field": "flow",
                        "group_by": [
                            "route_id"
                        ],
                        "routes_config_path": "configs/routes.json",
                        "output_format": "frontend_api",
                        "route_id_field": "route_id",
                        "capacity_field": "capacity",
                        "transport_type_field": "type"
                    }
                },
                "backend": {
                    "name": "js_constants",
                    "config": {}
                }
            }
        }
    ]
}